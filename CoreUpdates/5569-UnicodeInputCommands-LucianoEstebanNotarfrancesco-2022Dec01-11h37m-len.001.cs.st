'From Cuis 6.0 [latest update: #5566] on 1 December 2022 at 12:39:32 pm'!
!classDefinition: #UnicodeCodePoint category: #'Kernel-Text'!
Object subclass: #UnicodeCodePoint
	instanceVariableNames: 'value '
	classVariableNames: 'DiacriticalMarksTable LowercaseLettersTable SymbolsLikeTable UppercaseLettersTable NamedCharactersMap '
	poolDictionaries: ''
	category: 'Kernel-Text'!

!UnicodeCodePoint class methodsFor: 'class initialization' stamp: 'len 12/1/2022 12:23:57'!
initializeNamedCharactersMap
	"Dictionary of named characters that we can enter in an editor using \name.
	Please keep the names short and try to follow the naming convention used in LaTeX."

	NamedCharactersMap _ Dictionary new.
	"Superscripts:"
	4 to: 9 do: [:each| NamedCharactersMap at: '^', each printString put: (self codePoint: 16r2070 + each)].
	"Subscripts:"
	0 to: 9 do: [:each| NamedCharactersMap at: '_', each printString put: (self codePoint: 16r2080 + each)].
	#(
		"Some superscripts in the Latin-1 range:"
		('^0' $â°) ('^1' $Â¹) ('^2' $Â²) ('^3' $Â³)
		"Arrows:"
		(left $â†) (right $â†’) (up $â†‘) (down $â†“) (leftright $â†”) (updown $â†•)
		(Left $â‡) (Up $â‡‘) (Right $â‡’) (Down $â‡“) (Leftright $â‡”) (Updown $â‡•)
		(mapsto $â†¦) (implies $âŸ¹) (iff $âŸº)
		(gets $â†) (to $â†’) (hom $â‡’) #(fromall $â‡‡) (toall $â‡‰)
		"Greek alphabet:"
		(alpha $Î±) (beta $Î²) (gamma $Î³) (delta $Î´) (epsilon $Îµ) (zeta $Î¶) (eta $Î·) (theta $Î¸) (iota $Î¹) (kappa $Îº) (lambda $Î») (mu $Î¼) (nu $Î½) (xi $Î¾) (omicron $Î¿) (pi $Ï€) (rho $Ï) (sigmaf $Ï‚) (sigma $Ïƒ) (tau $Ï„) (upsilon $Ï…) (phi $Ï†) (chi $Ï‡) (psi $Ïˆ) (omega $Ï‰) (thetasym $Ï‘) (upsih $Ï’) (piv $Ï–)
		(Alpha $Î‘) (Beta $Î’) (Gamma $Î“) (Delta $Î”) (Epsilon $Î•) (Zeta $Î–) (Eta $Î—) (Theta $Î˜) (Iota $Î™) (Kappa $Îš) (Lambda $Î›) (Mu $Îœ) (Nu $Î) (Xi $Î) (Omicron $ÎŸ) (Pi $Î ) (Rho $Î¡) (Sigma $Î£) (Tau $Î¤) (Upsilon $Î¥) (Phi $Î¦) (Chi $Î§) (Psi $Î¨) (Omega $Î©)
		"Blackboard bold:"
		(A $ğ”¸) (B $ğ”¹) (C $â„‚) (D $ğ”») (E $ğ”¼) (F $ğ”½) (G $ğ”¾) (H $â„) (I $ğ•€) (J $ğ•) (K $ğ•‚) (L $ğ•ƒ) (M $ğ•„) (N $â„•) (O $ğ•†) (P $â„™) (Q $â„š) (R $â„) (S $ğ•Š) (T $ğ•‹) (U $ğ•Œ) (V $ğ•) (W $ğ•) (X $ğ•) (Y $ğ•) (Z $â„¤)
		"Math symbols:"
		(oplus $âŠ•) (otimes $âŠ—) (times $Ã—) (div $Ã·) (circ $âˆ˜) (bullet $âˆ™) (cdot $Â·) (prod $âŠ“) (coprod $âŠ”) (perp $âŠ¥)		
		(cap $âˆ©) (cup $âˆª) (sqcap $âŠ“) (sqcup $âŠ”) (wedge $âˆ§) (vee $âˆ¨) (perp $âŠ¥) (parallel $âˆ¥)	
		(in $âˆˆ) (notin $âˆ‰) (exists $âˆƒ) (nexists $âˆ„) (forall $âˆ€) (emptyset $âˆ…) (infty $âˆ) (aleph $â„µ) (ell $â„“)
		(sqrt $âˆš) (partial $âˆ‚) (deg $Â°)
(leq $â‰¤) (geq $â‰¥) (neq $â‰ ) (prec $â‰º) (succ $â‰») (simeq $â‰ƒ) (cong $â‰…) (equiv $â‰¡) (approx $â‰ˆ) (subset $âŠ‚) (supset $âŠƒ)
		"Other:"
		(lowast $â) (dag $â€ ) (ddag $â€¡) (emdash $â€”) (endash $â€“) (questiondown $Â¿) (exclamdown $Â¡)
		(euro $â‚¬) (pounds $Â£) (celsius $â„ƒ) (farenheit $â„‰)
		(registered $Â®) (copyright $Â©) (trademark $â„¢) (snowman $â˜ƒ) (section $Â§))
		do: [:each| NamedCharactersMap at: each first put: each second]! !

!UnicodeCodePoint class methodsFor: 'constants' stamp: 'len 12/1/2022 12:23:44'!
namedCharactersMap
	"Dictionary of named characters that we can enter in an editor using \name."

	^ NamedCharactersMap! !


!SmalltalkEditor methodsFor: 'typing/selecting keys' stamp: 'len 12/1/2022 12:32:46'!
normalCharacter: aKeyboardEvent 
	"A nonspecial character is to be added to the stream of characters."

	| string key |
	aKeyboardEvent keyCharacter isLetter ifTrue: [^ super normalCharacter: aKeyboardEvent].
	"Allow to enter named (otherwise untypable) characters like the alpha greek letter as \alpha."
	string _ self privateCurrentString.
	"Look backwards and find a character that is not a letter (we want to find '\' just a few characters behind):"
	self pointIndex - 1 to: (self pointIndex - 20 max: 1) by: -1 do: [:i|
		(string at: i) = $\ ifTrue: 
			[key _ string copyFrom: i + 1 to: self pointIndex - 1.
			UnicodeCodePoint namedCharactersMap at: key ifPresent: [:value| self selectFrom: i to: self pointIndex - 1; replaceSelectionWith: (Utf8String with: value)].
			^ super normalCharacter: aKeyboardEvent]].
	^ super normalCharacter: aKeyboardEvent! !

!methodRemoval: UnicodeCodePoint class #namedCharactersTable stamp: 'len 12/1/2022 12:35:15'!
UnicodeCodePoint class removeSelector: #namedCharactersTable!
!classDefinition: #UnicodeCodePoint category: #'Kernel-Text'!
Object subclass: #UnicodeCodePoint
	instanceVariableNames: 'value'
	classVariableNames: 'DiacriticalMarksTable LowercaseLettersTable NamedCharactersMap SymbolsLikeTable UppercaseLettersTable'
	poolDictionaries: ''
	category: 'Kernel-Text'!

UnicodeCodePoint initializeNamedCharactersMap!
